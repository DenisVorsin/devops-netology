## ДЗ 3.5 Файловые системы Ворсин Денис

### 1. Узнайте о sparse (разряженных) файлах.


        Разрежённый файл (англ. sparse file) — файл, в котором последовательности нулевых байтов заменены на информацию об этих последовательностях (список дыр).
        Дыра (англ. hole) — последовательность нулевых байт внутри файла, не записанная на диск. Информация о дырах (смещение от начала файла в байтах и количество байт) хранится в метаданных ФС. 


### 2. Могут ли файлы, являющиеся жесткой ссылкой на один объект, иметь разные права доступа и владельца? Почему?


        Файлы, являющиеся жесткой ссылкой на один обьект не могут иметь разные права доступа и владельца, т.к. по сути это один файл имеющий несколько ссылок в файловой системе на себя.
![test ch](DZ_3.5/2021-11-26%2017_12_12.jpg)

### 3. Сделайте vagrant destroy на имеющийся инстанс Ubuntu. Замените содержимое Vagrantfile следующим:


        виртуальная машина с нужными дисками создана.
![image](DZ_3.5/2021-11-29%2003_13_17.jpg)

### 4. Используя fdisk, разбейте первый диск на 2 раздела: 2 Гб, оставшееся пространство.


![image](DZ_3.5/2021-11-29%2003_20_37.jpg)


### 5. Используя sfdisk, перенесите данную таблицу разделов на второй диск.


![image](DZ_3.5/2021-11-29%2003_24_54.jpg)


### 6. Соберите mdadm RAID1 на паре разделов 2 Гб.


![image](DZ_3.5/2021-11-29%2003_31_44.jpg)

### 7. Соберите mdadm RAID0 на второй паре маленьких разделов.


![image](DZ_3.5/2021-11-29%2003_37_48.jpg)

### 8. Создайте 2 независимых PV на получившихся md-устройствах.


![image](DZ_3.5/2021-11-29%2004_19_05.jpg)

### 9. Создайте общую volume-group на этих двух PV.


![image](DZ_3.5/2021-11-29%2004_19_55.jpg)

### 10. Создайте LV размером 100 Мб, указав его расположение на PV с RAID0.


![image](DZ_3.5/2021-11-29%2004_20_52.jpg)

### 11. Создайте mkfs.ext4 ФС на получившемся LV.


![image](DZ_3.5/2021-11-29%2004_17_39.jpg)

### 12. Смонтируйте этот раздел в любую директорию, например, /tmp/new.


![image](DZ_3.5/2021-11-29%2004_23_11.jpg)

### 13. Поместите туда тестовый файл, например wget https://mirror.yandex.ru/ubuntu/ls-lR.gz -O /tmp/new/test.gz.


![image](DZ_3.5/2021-11-29%2004_23_56.jpg)

### 14. Прикрепите вывод lsblk.


![image](DZ_3.5/2021-11-29%2004_24_41.jpg)

### 15. Протестируйте целостность файла:


![image](DZ_3.5/2021-11-29%2004_25_37.jpg)

### 16. Используя pvmove, переместите содержимое PV с RAID0 на RAID1.


![image](DZ_3.5/2021-11-29%2004_28_51.jpg)

        диски переехали:

![image](DZ_3.5/2021-11-29%2004_29_31.jpg)


### 17. Сделайте --fail на устройство в вашем RAID1 md.


![image](DZ_3.5/2021-11-29%2004_31_55.jpg)

### 18. Подтвердите выводом dmesg, что RAID1 работает в деградированном состоянии.


![image](DZ_3.5/2021-11-29%2004_33_22.jpg)

### 19. Протестируйте целостность файла, несмотря на "сбойный" диск он должен продолжать быть доступен:


![image](DZ_3.5/2021-11-29%2004_34_38.jpg)


